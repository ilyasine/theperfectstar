!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.BigPictureClient=t():e.BigPictureClient=t()}(self,(function(){return(()=>{var e={877:(e,t,n)=>{var r=n(570),i=n(171),a=i;a.v1=r,a.v4=i,e.exports=a},327:e=>{for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);e.exports=function(e,n){var r=n||0,i=t;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},217:e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},570:(e,t,n)=>{var r,i,a=n(217),o=n(327),s=0,c=0;e.exports=function(e,t,n){var l=t&&n||0,u=t||[],p=(e=e||{}).node||r,f=void 0!==e.clockseq?e.clockseq:i;if(null==p||null==f){var d=a();null==p&&(p=r=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==f&&(f=i=16383&(d[6]<<8|d[7]))}var m=void 0!==e.msecs?e.msecs:(new Date).getTime(),v=void 0!==e.nsecs?e.nsecs:c+1,g=m-s+(v-c)/1e4;if(g<0&&void 0===e.clockseq&&(f=f+1&16383),(g<0||m>s)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=m,c=v,i=f;var b=(1e4*(268435455&(m+=122192928e5))+v)%4294967296;u[l++]=b>>>24&255,u[l++]=b>>>16&255,u[l++]=b>>>8&255,u[l++]=255&b;var y=m/4294967296*1e4&268435455;u[l++]=y>>>8&255,u[l++]=255&y,u[l++]=y>>>24&15|16,u[l++]=y>>>16&255,u[l++]=f>>>8|128,u[l++]=255&f;for(var h=0;h<6;++h)u[l+h]=p[h];return t||o(u)}},171:(e,t,n)=>{var r=n(217),i=n(327);e.exports=function(e,t,n){var a=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||r)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var s=0;s<16;++s)t[a+s]=o[s];return t||i(o)}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{"use strict";n.r(r),n.d(r,{configure:()=>O,configureWithEvent:()=>T,sendEvent:()=>x});var e=function(){return e=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},e.apply(this,arguments)};Object.create;Object.create;function t(e){return e.toLowerCase()}var i=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],a=/[^A-Z0-9]+/gi;function o(e,t,n){return t instanceof RegExp?e.replace(t,n):t.reduce((function(e,t){return e.replace(t,n)}),e)}function s(n,r){return void 0===r&&(r={}),function(e,n){void 0===n&&(n={});for(var r=n.splitRegexp,s=void 0===r?i:r,c=n.stripRegexp,l=void 0===c?a:c,u=n.transform,p=void 0===u?t:u,f=n.delimiter,d=void 0===f?" ":f,m=o(o(e,s,"$1\0$2"),l,"\0"),v=0,g=m.length;"\0"===m.charAt(v);)v++;for(;"\0"===m.charAt(g-1);)g--;return m.slice(v,g).split("\0").map(p).join(d)}(n,e({delimiter:"."},r))}class c{name="bigpicture-client-ts";version="1.2.0";constructor(){}static attributeTypeMap=[{name:"name",baseName:"name",type:"string"},{name:"version",baseName:"version",type:"string"}];static getAttributeTypeMap(){return c.attributeTypeMap}}var l=n(877);class u{eid=(0,l.v4)();ts_ms=Date.now();constructor(e,t){this.event=e,this._tracker=new c,this._globalBPO=t}get tracker(){return this._tracker}get global(){return this._globalBPO}static attributeTypeMap=[{name:"eid",baseName:"eid",type:"string"},{name:"ts_ms",baseName:"ts_ms",type:"number"},{name:"event",baseName:"event",type:"Event"},{name:"global",baseName:"global",type:"Event"},{name:"tracker",baseName:"tracker",type:"Tracker"}];static getAttributeTypeMap(){return u.attributeTypeMap}}class p{constructor(e,t,n,r){this.name=e,this.ts_ms=Date.now(),this.version=t,this.fields=n,this.namespace=r}static attributeTypeMap=[{name:"name",baseName:"name",type:"string"},{name:"ts_ms",baseName:"ts_ms",type:"number"},{name:"version",baseName:"version",type:"number"},{name:"fields",baseName:"fields",type:"object"},{name:"namespace",baseName:"namespace",type:"string"}];static getAttributeTypeMap(){return p.attributeTypeMap}}let f,d=["string","boolean","double","integer","long","float","number","any"],m={},v={Envelope:u,Event:p,Tracker:c};class g{static findCorrectType(e,t){if(null==e)return t;if(-1!==d.indexOf(t.toLowerCase()))return t;if("Date"===t)return t;{if(m[t])return t;if(!v[t])return t;let r=v[t].discriminator;if(null==r)return t;if(e[r]){var n=e[r];return v[n]?n:t}return t}}static serialize(e,t){if(null==e)return e;if(-1!==d.indexOf(t.toLowerCase()))return e;if(0===t.lastIndexOf("Array<",0)){let n=t.replace("Array<","");n=n.substring(0,n.length-1);let r=[];for(let t in e){let i=e[t];r.push(g.serialize(i,n))}return r}if("Date"===t)return e.toISOString();{if(m[t])return e;if(!v[t])return e;t=this.findCorrectType(e,t);let n=v[t].getAttributeTypeMap(),r={};for(let t in n){let i=n[t];r[i.baseName]=g.serialize(e[i.name],i.type)}return r}}static deserialize(e,t){if(t=g.findCorrectType(e,t),null==e)return e;if(-1!==d.indexOf(t.toLowerCase()))return e;if(0===t.lastIndexOf("Array<",0)){let n=t.replace("Array<","");n=n.substring(0,n.length-1);let r=[];for(let t in e){let i=e[t];r.push(g.deserialize(i,n))}return r}if("Date"===t)return new Date(e);{if(m[t])return e;if(!v[t])return e;let n=new v[t],r=v[t].getAttributeTypeMap();for(let t in r){let i=r[t];n[i.name]=g.deserialize(e[i.baseName],i.type)}return n}}}!function(e){e.FRESNEL_PROD="https://fresnel-events.vimeocdn.com",e.FRESNEL_DEV="https://fresnel-event-staging.vimeows.com"}(f||(f={}));class b{constructor(e,t=null){this.service=e,this.globalBPO=t}}class y{static FLUSH_QUEUE_TIMEOUT=1e4;static conf=new b(f.FRESNEL_PROD);static WAIT_QUEUE=[];static get isInitalized(){return Boolean(y.conf.globalBPO)}constructor(){}static configure(e){y.conf=e,y.WAIT_QUEUE.length>0&&(y.WAIT_QUEUE.map((e=>y.sendEvent(e))),y.WAIT_QUEUE=[])}static async updateObject(e,t){for(const[n,r]of Object.entries(e))if(n in t){if(r instanceof Object)return t[n]instanceof Object?void y.updateObject(r,t[n]):void(t[n]=r);t[n]=r}}static async updateContext(e){"global"==e.context&&y.conf.globalBPO&&y.updateObject(e.fields,y.conf.globalBPO.fields)}static async sendEvent(t,n){if(null==t)throw new Error("Required parameter event was null or undefined when calling sendEvent.");if(!y.isInitalized)return y.WAIT_QUEUE.push(t),void(Boolean(y.flushQueueTimeoutHandler)||(y.flushQueueTimeoutHandler=setTimeout((()=>{y.WAIT_QUEUE.length>0&&(y.WAIT_QUEUE=[])}),y.FLUSH_QUEUE_TIMEOUT)));const r=JSON.stringify(g.serialize([new u(t,this.conf.globalBPO)],"Array<Envelope>"));let i=t.name;var a,o;null!=t.namespace&&(a=t.namespace,void 0===o&&(o={}),i=s(a,e({delimiter:"_"},o))+"."+t.name);const c=`${this.conf.service}/add/${encodeURIComponent(i)}`;if(!navigator.sendBeacon||n){let e={method:"POST",headers:{"Content-Type":"application/json","User-Agent":navigator.userAgent,Origin:location.origin,Referer:document.referrer},body:r};n&&(e.headers.Authorization=n),await fetch(c,e)}else{var l=new Blob([r]);navigator.sendBeacon(c,l)}}}const h=e=>{if("undefined"==typeof document)return null;const t=document.cookie.match(new RegExp(`(;\\s)?${e}=`));if(!t||0==t.length||void 0===t.index)return null;const n=document.cookie.indexOf(";",t.index+1),r=t.index+t[0].length,i=-1===n?document.cookie.substr(r):document.cookie.substring(r,n);return decodeURIComponent(i)};let w="";const E=async e=>{const t=await fetch("https://api.vimeo.com/bigpicture/access_token",{method:"GET",headers:{Authorization:e}});if(!t.ok)throw new Error;{const e=await t.json();w=`Bearer ${e.token}`}},_=async e=>{const t=e.split(" ")[0];await E(e),"bearer"===t.toLowerCase()&&setInterval((()=>E(e)),348e4)},O=async(e,t="en",n)=>{var r;const i=new p("vimeo.web_global",5,{user:{subscription_type:null,is_mod:!1,session_id:null,teams:null,user_id:null,vuid:h("vuid"),is_free_trial:!1,flags:[]},application:{application:"vimeo",vimeo_language:t,product:e,build_environment:"production",version:{full:"1.0.0",major:"1",minor:"0",patch:"0"}},platform:{device_language:(null===(r=window.navigator)||void 0===r?void 0:r.language)??"",screen:{dpi:screen.pixelDepth,height:screen.height,width:screen.width,size:`${screen.width} x ${screen.height}`},network:null,platform:"web"}});n&&await _(n),y.configure(new b(f.FRESNEL_PROD,i))},T=async(e,t)=>{t&&await _(t),y.configure(new b(f.FRESNEL_PROD,e))},x=async(e,t,n)=>{y.sendEvent(new p(e,t,n),w)}})(),r})()}));