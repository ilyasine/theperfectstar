{"version":3,"sources":["webpack://vimeography-pro-admin/./src/components/ListGalleries/Filters/ListFilters.tsx","webpack://vimeography-pro-admin/./src/components/ListGalleries/Filters/NewFilter.tsx","webpack://vimeography-pro-admin/./src/components/ListGalleries/Filters/context/Filter.ts","webpack://vimeography-pro-admin/./src/components/ListGalleries/Filters/OptionRow.tsx","webpack://vimeography-pro-admin/./src/components/ListGalleries/Filters/OptionForm.tsx","webpack://vimeography-pro-admin/./src/components/ListGalleries/Filters/OptionsList.tsx","webpack://vimeography-pro-admin/./src/components/ListGalleries/Filters/providers/Filter.tsx","webpack://vimeography-pro-admin/./src/components/ListGalleries/Filters/NoOptionsIllo.tsx","webpack://vimeography-pro-admin/./src/components/ListGalleries/Filters/NoOptions.tsx","webpack://vimeography-pro-admin/./src/components/ListGalleries/Filters/EditFilter.tsx","webpack://vimeography-pro-admin/./src/components/ListGalleries/Filters/Filters.tsx"],"names":["props","className","data","map","filter","key","id","title","Link","to","setTitle","queryClient","useQueryClient","history","useHistory","mutation","useMutation","fetch","window","vimeographyApiSettings","root","method","mode","cache","credentials","headers","wpApiSettings","nonce","body","JSON","stringify","onSuccess","invalidateQueries","type","value","onChange","e","target","onClick","mutate","push","console","log","isLoading","error","state","dispatch","attributes","listeners","setNodeRef","transform","transition","isDragging","style","ctx","Filter","ref","fill","viewBox","xmlns","fillRule","d","clipRule","option","slug","newOptionTitle","setNewOptionTitle","placeholder","onKeyDown","payload","sensors","coordinateGetter","options","length","collisionDetection","onDragEnd","event","items","strategy","initialState","toSlug","str","replace","toLowerCase","from","i","l","RegExp","charAt","reducer","action","next","oldIndex","findIndex","newIndex","decoratedDispatch","dispatchMiddleware","useQuery","then","res","json","staleTime","Infinity","children","width","height","cx","cy","rx","ry","EditFilterBody","gridTemplateColumns","params","useParams","filterId","Switch","Route","path","exact"],"mappings":"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","file":"86.chunk.aacd7ae7deab3b960bd5.js","sourcesContent":["import * as React from \"react\";\n\nimport { Link } from \"react-router-dom\";\n\ntype FilterSortType = \"RADIO\";\ntype FilterSortBy = \"OPTION_POSITION\";\n\ntype Filter = {\n  id: string;\n  options: string;\n  slug: string;\n  sort_by: FilterSortBy;\n  title: string;\n  type: FilterSortType;\n};\n\ntype ListFiltersProps = {\n  data: Filter[];\n};\n\nconst ListFilters = (props: ListFiltersProps) => {\n  return (\n    <div className=\"vm-border vm-rounded\">\n      {props.data.map((filter: Filter) => (\n        <div key={filter.id} className=\"vm-p-4 vm-border-b\">\n          <span className=\"vm-font-semibold\">{filter.title} </span>\n          <Link to={`/filters/${filter.id}`} className=\"vm-text-blue-500\">\n            Edit\n          </Link>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default ListFilters;\n","import * as React from \"react\";\n\nimport { Link, useHistory } from \"react-router-dom\";\nimport { useMutation, useQueryClient } from \"react-query\";\n\nconst NewFilter = () => {\n  const [title, setTitle] = React.useState(\"\");\n  const queryClient = useQueryClient();\n  const history = useHistory();\n\n  const mutation = useMutation(\n    (title: string) =>\n      fetch(\n        (window as any).vimeographyApiSettings.root + `vimeography/v1/filters`,\n        {\n          method: \"POST\",\n          mode: \"same-origin\",\n          cache: \"no-cache\",\n          credentials: \"same-origin\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"X-WP-Nonce\": window.wpApiSettings\n              ? window.wpApiSettings.nonce\n              : window.vimeographyApiSettings.nonce,\n          },\n          body: JSON.stringify({\n            title,\n          }),\n        }\n      ),\n    {\n      onSuccess: () => {\n        queryClient.invalidateQueries(\"filters\");\n      },\n    }\n  );\n\n  const addFilter = async () => {\n    // make request, close modal, reload galleries\n    if (title === \"\") return;\n\n    try {\n      const result = await mutation.mutate(title);\n      history.push(\"/filters\");\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return (\n    <>\n      <div className=\"vm-flex vm-mb-4\">\n        <h2 className=\"vm-text-xl vm-flex-1\">Create a new filter</h2>\n        <Link to=\"/filters\">Back to all filters</Link>\n      </div>\n\n      <div>\n        <label className=\"vm-font-semibold vm-block vm-text-base vm-mb-1 vm-text-gray-600\">\n          Filter name\n        </label>\n        <input\n          type=\"text\"\n          value={title}\n          onChange={(e) => setTitle(e.target.value)}\n          className=\"vm-mb-4 vm-w-72 vm-block\"\n        />\n        <button\n          onClick={addFilter}\n          className=\"vm-rounded vm-bg-blue-500 vm-text-white vm-px-3 vm-py-2\"\n        >\n          Create filter\n        </button>\n      </div>\n\n      <div className=\"vm-my-4\">\n        <ul>\n          <li>\n            For <strong>training videos,</strong> you might create a{\" \"}\n            <strong>Teacher</strong> filter with{\" \"}\n            <strong>Joe, Sue, and Bill</strong> as choices.\n          </li>\n          <li>\n            For <strong>car videos,</strong> you might create a{\" \"}\n            <strong>Make</strong> filter with{\" \"}\n            <strong>Subaru, Honda, and Tesla</strong> as choices.\n          </li>\n          <li>\n            For <strong>sports videos,</strong> you might create a{\" \"}\n            <strong>Sport</strong> filter with{\" \"}\n            <strong>Baseball, Football, and Soccer</strong> as choices.\n          </li>\n          <li>\n            For <strong>videos about books,</strong> you might create an{\" \"}\n            <strong>Author</strong> filter with{\" \"}\n            <strong>Malcolm Gladwell, Tim Ferriss, and Derek Sivers</strong> as\n            choices.\n          </li>\n        </ul>\n      </div>\n    </>\n  );\n};\n\nexport default NewFilter;\n","import * as React from \"react\";\nimport { FilterState } from \"../providers/Filter\";\n\ntype FilterContext = {\n  isLoading: boolean;\n  error: Error;\n  data: null;\n  state: FilterState;\n  dispatch: any;\n};\n\nconst ctx: FilterContext = {\n  isLoading: true,\n  error: null,\n  data: null,\n  state: null,\n  dispatch: () => {},\n};\n\nconst FilterContext = React.createContext(ctx);\n\nexport default FilterContext;\n","import * as React from \"react\";\n\nimport { useSortable } from \"@dnd-kit/sortable\";\nimport { CSS } from \"@dnd-kit/utilities\";\nimport FilterContext from \"./context/Filter\";\n\nconst OptionRow = (props) => {\n  const {\n    attributes,\n    listeners,\n    setNodeRef,\n    transform,\n    transition,\n    isDragging,\n  } = useSortable({ id: props.id });\n\n  const style = {\n    transform: CSS.Transform.toString(transform),\n    transition,\n  };\n\n  const ctx = React.useContext(FilterContext);\n\n  return (\n    <div\n      className={`vm-border-b vm-text-xl vm-p-4 vm-bg-white ${\n        isDragging ? \"vm-shadow-xl vm-z-10\" : \"\"\n      }`}\n      ref={setNodeRef}\n      style={style}\n      {...attributes}\n      {...listeners}\n    >\n      <div className=\"vm-flex vm-items-center\">\n        <svg\n          className=\"vm-w-5 vm-h-5 vm-mr-2 vm-text-gray-400 vm-cursor-move\"\n          fill=\"currentColor\"\n          viewBox=\"0 0 20 20\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <path\n            fillRule=\"evenodd\"\n            d=\"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z\"\n            clipRule=\"evenodd\"\n          />\n        </svg>\n        <span className=\"vm-flex-1\">{props.option.title}</span>\n        <span className=\"vm-font-mono vm-text-sm\">\n          {ctx.data.title}:{props.option.slug}\n        </span>\n      </div>\n    </div>\n  );\n};\n\nexport default OptionRow;\n","import * as React from \"react\";\nimport FilterContext from \"./context/Filter\";\n\nconst OptionForm = () => {\n  const ctx = React.useContext(FilterContext);\n  const [newOptionTitle, setNewOptionTitle] = React.useState(\"\");\n  return (\n    <>\n      <input\n        type=\"text\"\n        className=\"vm-block vm-mb-2 vm-w-full vm-max-w-md\"\n        value={newOptionTitle}\n        onChange={(e) => setNewOptionTitle(e.target.value)}\n        placeholder={`New ${ctx.state.title}…`}\n        onKeyDown={(e) => {\n          if (e.key === \"Enter\") {\n            ctx.dispatch({\n              type: `ADD_OPTION`,\n              payload: { title: newOptionTitle },\n            });\n            setNewOptionTitle(\"\");\n          }\n        }}\n      />\n\n      <button\n        className=\"vm-bg-blue-500 vm-text-white vm-rounded vm-px-3 vm-py-2\"\n        onClick={() => {\n          ctx.dispatch({\n            type: `ADD_OPTION`,\n            payload: { title: newOptionTitle },\n          });\n          setNewOptionTitle(\"\");\n        }}\n      >\n        Add {ctx.state.title}\n      </button>\n    </>\n  );\n};\n\nexport default OptionForm;\n","import * as React from \"react\";\nimport OptionRow from \"./OptionRow\";\n\nimport FilterContext from \"./context/Filter\";\n\nimport OptionForm from \"./OptionForm\";\n\nimport {\n  DndContext,\n  closestCenter,\n  KeyboardSensor,\n  PointerSensor,\n  useSensor,\n  useSensors,\n} from \"@dnd-kit/core\";\n\nimport {\n  SortableContext,\n  sortableKeyboardCoordinates,\n  verticalListSortingStrategy,\n} from \"@dnd-kit/sortable\";\n\nconst OptionsList = () => {\n  const sensors = useSensors(\n    useSensor(PointerSensor),\n    useSensor(KeyboardSensor, {\n      coordinateGetter: sortableKeyboardCoordinates,\n    })\n  );\n\n  const ctx = React.useContext(FilterContext);\n\n  return (\n    <>\n      <h2 className=\"vm-text-gray-600 vm-text-base vm-mb-2 vm-block vm-text-right\">\n        {ctx.state.options.length} {ctx.state.title}\n        {ctx.state.options.length > 1 ? \"s\" : \"\"}\n      </h2>\n      <div className=\"vm-mb-4 vm-border vm-rounded\">\n        <DndContext\n          sensors={sensors}\n          collisionDetection={closestCenter}\n          onDragEnd={(event) =>\n            ctx.dispatch({ type: `SORT_OPTIONS`, payload: event })\n          }\n        >\n          <SortableContext\n            items={ctx.state.options.map((option) => option.id)}\n            strategy={verticalListSortingStrategy}\n          >\n            {ctx.state.options.map((option) => (\n              <OptionRow key={option.id} id={option.id} option={option} />\n            ))}\n          </SortableContext>\n        </DndContext>\n      </div>\n      <OptionForm />\n    </>\n  );\n};\n\nexport default OptionsList;\n","import * as React from \"react\";\nimport FilterContext from \"../context/Filter\";\nimport { useQuery } from \"react-query\";\nimport produce from \"immer\";\nimport { arrayMove } from \"@dnd-kit/sortable\";\n\ntype FilterProviderProps = React.PropsWithChildren<{ id?: string }>;\n\ntype FilterOption = {\n  id: string;\n  title: string;\n  slug: string;\n};\n\nexport type FilterState = {\n  id: string;\n  title: string;\n  slug: string;\n  options: FilterOption[];\n};\n\ntype NewOptionPayload = {\n  title: string;\n};\n\ntype Sortable = {\n  id: string;\n};\n\ntype SortOptionsPayload = {\n  active: Sortable;\n  over: Sortable;\n};\n\ntype Action =\n  | { type: `HYDRATE`; payload: FilterState }\n  | { type: `EDIT_TITLE`; payload: string }\n  | { type: `ADD_OPTION`; payload: NewOptionPayload }\n  | { type: `SORT_OPTIONS`; payload: SortOptionsPayload };\n\nconst initialState: FilterState = {\n  id: \"\",\n  slug: \"\",\n  title: \"\",\n  options: [],\n};\n\nconst toSlug = (str: string) => {\n  str = str.replace(/^\\s+|\\s+$/g, \"\"); // trim\n  str = str.toLowerCase();\n\n  // remove accents, swap ñ for n, etc\n  var from = \"àáäâèéëêìíïîòóöôùúüûñçěščřžýúůďťň·/_,:;\";\n  var to = \"aaaaeeeeiiiioooouuuuncescrzyuudtn------\";\n\n  for (var i = 0, l = from.length; i < l; i++) {\n    str = str.replace(new RegExp(from.charAt(i), \"g\"), to.charAt(i));\n  }\n\n  str = str\n    .replace(\".\", \"-\") // replace a dot by a dash\n    .replace(/[^a-z0-9 -]/g, \"\") // remove invalid chars\n    .replace(/\\s+/g, \"-\") // collapse whitespace and replace by a dash\n    .replace(/-+/g, \"-\") // collapse dashes\n    .replace(/\\//g, \"\"); // collapse all forward-slashes\n\n  return str;\n};\n\nconst reducer = (state: FilterState, action: Action) => {\n  switch (action.type) {\n    case \"HYDRATE\": {\n      return produce(state, (next) => {\n        next.id = action.payload.id;\n        next.title = action.payload.title;\n        next.slug = action.payload.slug;\n        next.options = action.payload.options || [];\n      });\n    }\n\n    case \"EDIT_TITLE\": {\n      return produce(state, (next) => {\n        next.title = action.payload;\n      });\n    }\n\n    case \"ADD_OPTION\": {\n      if (action.payload.title === \"\") return state;\n\n      return produce(state, (next) => {\n        next.options.push({\n          id: action.payload.title,\n          title: action.payload.title,\n          slug: toSlug(action.payload.title),\n        });\n      });\n    }\n\n    case \"SORT_OPTIONS\": {\n      const { active, over } = action.payload;\n\n      if (active.id !== over.id) {\n        const oldIndex = state.options.findIndex(\n          (option) => option.id === active.id\n        );\n        const newIndex = state.options.findIndex(\n          (option) => option.id === over.id\n        );\n        const options = arrayMove(state.options, oldIndex, newIndex);\n\n        return {\n          ...state,\n          options,\n        };\n      }\n\n      return state;\n    }\n\n    default: {\n      return state;\n    }\n  }\n};\n\nfunction dispatchMiddleware(dispatch) {\n  return (action) => {\n    switch (action.type) {\n      case \"ADD_OPTION\":\n      default:\n        return dispatch(action);\n    }\n  };\n}\n\nconst FilterProvider = (props: FilterProviderProps) => {\n  const [state, dispatch] = React.useReducer(reducer, initialState);\n  const decoratedDispatch = dispatchMiddleware(dispatch);\n\n  const { isLoading, error, data } = useQuery(\n    [\"filters\", props.id],\n    () => {\n      return fetch(\n        (window as any).vimeographyApiSettings.root +\n          `vimeography/v1/filters/${props.id}`\n      ).then((res) => {\n        return res.json();\n      });\n    },\n    {\n      staleTime: Infinity,\n    }\n  );\n\n  React.useEffect(() => {\n    if (!data) return;\n    dispatch({ payload: data, type: \"HYDRATE\" });\n  }, [data]);\n\n  React.useEffect(() => {\n    console.log(`save options`);\n    console.log(state);\n  }, [state.options]);\n\n  return (\n    <FilterContext.Provider\n      value={{\n        isLoading,\n        error,\n        data,\n        state,\n        dispatch: decoratedDispatch,\n      }}\n    >\n      {props.children}\n    </FilterContext.Provider>\n  );\n};\n\nexport default FilterProvider;\n","import * as React from \"react\";\n\nfunction NoOptionsIllo(props) {\n  return (\n    <svg\n      data-name=\"Layer 1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width={997.861}\n      height={450.808}\n      viewBox=\"0 0 997.861 450.808\"\n      {...props}\n    >\n      <path fill=\"#f2f2f2\" d=\"M871.992 181.558h30.159v104.398h-30.159z\" />\n      <path\n        fill=\"#f2f2f2\"\n        d=\"M922.068 266.317l-73.353-87.265-147.24 1.346-89.319 86.998 1.805 1.16h-.645v180.957h308.555V268.556l.197-2.239z\"\n      />\n      <path\n        fill=\"#e6e6e6\"\n        d=\"M848.792 179.238l-91.638 107.436v162.839h164.717V266.236l-73.079-86.998z\"\n      />\n      <path\n        fill=\"#3f3d56\"\n        d=\"M823.272 359.461h33.639v29.733h-33.639zM823.272 307.996h33.639v29.262h-33.639z\"\n      />\n      <path\n        fill=\"#fff\"\n        d=\"M823.272 359.461h33.639v29.733h-33.639zM823.272 307.996h33.639v29.262h-33.639zM673.777 351.571h33.639v29.733h-33.639zM673.777 300.106h33.639v29.262h-33.639z\"\n      />\n      <path fill=\"#f2f2f2\" d=\"M633.992 181.558h30.159v104.398h-30.159z\" />\n      <path\n        fill=\"#f2f2f2\"\n        d=\"M684.068 266.317l-73.353-87.265-147.24 1.346-89.319 86.998 1.805 1.16h-.645v180.957h308.555V268.556l.197-2.239z\"\n      />\n      <path\n        fill=\"#e6e6e6\"\n        d=\"M610.792 179.238l-91.638 107.436v162.839h164.717V266.236l-73.079-86.998z\"\n      />\n      <path\n        fill=\"#3f3d56\"\n        d=\"M585.272 359.461h33.639v29.733h-33.639zM585.272 307.996h33.639v29.262h-33.639z\"\n      />\n      <path\n        fill=\"#fff\"\n        d=\"M585.272 359.461h33.639v29.733h-33.639zM585.272 307.996h33.639v29.262h-33.639zM435.777 351.571h33.639v29.733h-33.639zM435.777 300.106h33.639v29.262h-33.639z\"\n      />\n      <path fill=\"#f2f2f2\" d=\"M380.154 91.46h40.3v139.501h-40.3z\" />\n      <path\n        fill=\"#f2f2f2\"\n        d=\"M447.068 204.718L349.051 88.112 152.302 89.91 32.951 206.161l2.411 1.55h-.861v241.802h412.303V207.711l.264-2.993z\"\n      />\n      <path\n        fill=\"#e6e6e6\"\n        d=\"M349.153 88.36L226.702 231.921v217.592h220.102V204.611L349.153 88.36z\"\n      />\n      <path\n        fill=\"#3f3d56\"\n        d=\"M315.053 329.181h44.95v39.731h-44.95zM315.053 260.412h44.95v39.101h-44.95z\"\n      />\n      <path\n        fill=\"#fff\"\n        d=\"M315.053 329.181h44.95v39.731h-44.95zM315.053 260.412h44.95v39.101h-44.95zM115.29 318.639h44.95v39.731h-44.95zM115.29 249.869h44.95v39.101h-44.95z\"\n      />\n      <path fill=\"#3f3d56\" d=\"M0 448.62h963.951v2H0z\" />\n      <ellipse\n        cx={151.872}\n        cy={352.472}\n        rx={29.099}\n        ry={59.374}\n        fill=\"#3f3d56\"\n      />\n      <path\n        d=\"M154.56 449.658c-11.655-69.925-.118-139.598 0-140.293l2.267.384c-.117.692-11.588 69.999 0 139.532z\"\n        fill=\"#4cb5c2\"\n      />\n      <path\n        fill=\"#4cb5c2\"\n        d=\"M151.178 353.78l26.313-14.075 1.085 2.028-26.313 14.074zM123.406 348.783l1.085-2.028 26.31 14.083-1.085 2.027z\"\n      />\n      <ellipse\n        cx={81.955}\n        cy={260.903}\n        rx={56.915}\n        ry={116.129}\n        fill=\"#4cb5c2\"\n      />\n      <path\n        d=\"M88.295 450.808c-22.765-136.585-.23-272.673 0-274.032l2.267.384c-.23 1.356-22.698 137.077 0 273.27z\"\n        fill=\"#3f3d56\"\n      />\n      <path\n        fill=\"#3f3d56\"\n        d=\"M81.114 264.43l51.468-27.53 1.085 2.029-51.468 27.529zM26.797 252.72l1.086-2.029 51.46 27.544-1.085 2.028z\"\n      />\n      <ellipse\n        cx={216.754}\n        cy={191.008}\n        rx={77.883}\n        ry={158.914}\n        fill=\"#4cb5c2\"\n      />\n      <path\n        d=\"M225.847 450.808c-31.14-186.837-.315-372.992 0-374.85l2.267.384c-.314 1.855-31.073 187.644 0 374.089z\"\n        fill=\"#3f3d56\"\n      />\n      <path\n        fill=\"#3f3d56\"\n        d=\"M215.803 196.207l70.43-37.671 1.084 2.028-70.429 37.67zM141.474 179.434l1.085-2.027 70.42 37.69-1.086 2.027z\"\n      />\n      <ellipse\n        cx={871.029}\n        cy={352.472}\n        rx={29.099}\n        ry={59.374}\n        fill=\"#3f3d56\"\n      />\n      <path\n        d=\"M868.342 449.658c11.655-69.925.117-139.598 0-140.293l-2.267.384c.117.692 11.588 69.999-.001 139.532z\"\n        fill=\"#4cb5c2\"\n      />\n      <path\n        fill=\"#4cb5c2\"\n        d=\"M844.325 341.733l1.085-2.029 26.313 14.075-1.085 2.028zM872.1 360.838l26.31-14.083 1.085 2.028-26.31 14.082z\"\n      />\n      <ellipse\n        cx={940.946}\n        cy={260.903}\n        rx={56.915}\n        ry={116.129}\n        fill=\"#4cb5c2\"\n      />\n      <path\n        d=\"M934.607 450.808c22.765-136.585.23-272.673 0-274.032l-2.268.384c.23 1.356 22.699 137.077 0 273.27z\"\n        fill=\"#3f3d56\"\n      />\n      <path\n        fill=\"#3f3d56\"\n        d=\"M889.234 238.928l1.085-2.028 51.468 27.53-1.085 2.028zM943.559 278.235l51.46-27.544 1.086 2.028-51.46 27.544z\"\n      />\n      <ellipse\n        cx={806.148}\n        cy={191.008}\n        rx={77.883}\n        ry={158.914}\n        fill=\"#4cb5c2\"\n      />\n      <path\n        d=\"M797.055 450.808c31.14-186.837.314-372.992 0-374.85l-2.268.384c.315 1.855 31.074 187.644 0 374.089z\"\n        fill=\"#3f3d56\"\n      />\n      <path\n        fill=\"#3f3d56\"\n        d=\"M735.584 160.563l1.085-2.028 70.429 37.671-1.085 2.028zM809.923 215.097l70.42-37.69 1.084 2.028-70.419 37.69zM589.604 101.466l9.206-7.363c-7.151-.789-10.09 3.111-11.292 6.198-5.587-2.32-11.67.72-11.67.72l18.42 6.688a13.938 13.938 0 00-4.664-6.243zM364.604 36.466l9.206-7.363c-7.151-.789-10.09 3.111-11.292 6.198-5.587-2.32-11.67.72-11.67.72l18.42 6.688a13.938 13.938 0 00-4.664-6.243zM731.604 7.466L740.81.103c-7.151-.789-10.09 3.111-11.292 6.198-5.587-2.32-11.67.72-11.67.72l18.42 6.688a13.938 13.938 0 00-4.664-6.243zM750.19 437.052a13.918 13.918 0 00-6.969 1.87 14.982 14.982 0 00-25.03 11.13h45.95a13.99 13.99 0 00-13.95-13zM283.19 437.052a13.918 13.918 0 00-6.969 1.87 14.982 14.982 0 00-25.03 11.13h45.95a13.99 13.99 0 00-13.95-13zM522.19 437.052a13.918 13.918 0 00-6.969 1.87 14.982 14.982 0 00-25.03 11.13h45.95a13.99 13.99 0 00-13.95-13zM471.759 404.228H339.191v4.276h20.675v40.626h4.276v-40.626h80.527v40.626h4.277v-40.626h22.813v-4.276zM339.452 391.434H472.02v4.276H339.452zM339.452 380.743H472.02v4.276H339.452zM339.452 370.052H472.02v4.276H339.452zM678.759 404.228H546.191v4.276h20.675v40.626h4.276v-40.626h80.527v40.626h4.277v-40.626h22.813v-4.276zM546.452 391.434H679.02v4.276H546.452zM546.452 380.743H679.02v4.276H546.452zM546.452 370.052H679.02v4.276H546.452z\"\n      />\n    </svg>\n  );\n}\n\nexport default NoOptionsIllo;\n","import * as React from \"react\";\nimport NoOptionsIllo from \"./NoOptionsIllo\";\n\nimport FilterContext from \"./context/Filter\";\nimport OptionForm from \"./OptionForm\";\n\nconst NoOptions = () => {\n  const ctx = React.useContext(FilterContext);\n\n  return (\n    <div className=\"vm-flex vm-items-center vm-flex-col vm-justify-center\">\n      <NoOptionsIllo width=\"400\" height=\"250\" />\n      <h2 className=\"vm-text-2xl vm-text-gray-700 vm-font-semibold vm-mb-1\">\n        Add {ctx.state.title}\n      </h2>\n      <p className=\"vm-text-lg vm-text-gray-600 vm-mb-4\">\n        Define choices your viewers can find videos by within a filter.\n      </p>\n      <OptionForm />\n    </div>\n  );\n};\n\nexport default NoOptions;\n","import * as React from \"react\";\n\nimport { useParams, Link } from \"react-router-dom\";\nimport OptionsList from \"./OptionsList\";\nimport FilterContext from \"./context/Filter\";\nimport FilterProvider from \"./providers/Filter\";\nimport NoOptions from \"./NoOptions\";\n\nconst EditFilterBody = () => {\n  const ctx = React.useContext(FilterContext);\n\n  if (ctx.isLoading) return <div>Loading filter...</div>;\n  if (ctx.error) return <div>Error!</div>;\n\n  return (\n    <>\n      <div className=\"vm-mb-4\">\n        <div className=\"vm-text-xl\">Edit Filter: {ctx.state.title}</div>\n        <Link to=\"/filters\" className=\"vm-text-blue-500\">\n          Back to all filters\n        </Link>\n      </div>\n\n      <div\n        className=\"vm-grid vm-grid-cols-2\"\n        style={{ gridTemplateColumns: `320px 800px` }}\n      >\n        <div />\n\n        <div>\n          <div>\n            {ctx.state.options.length === 0 ? <NoOptions /> : <OptionsList />}\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nconst EditFilter = () => {\n  const params = useParams();\n  return (\n    <FilterProvider id={params.filterId}>\n      <EditFilterBody />\n    </FilterProvider>\n  );\n};\n\nexport default EditFilter;\n","import * as React from \"react\";\nimport ListFilters from \"./ListFilters\";\nimport NewFilter from \"./NewFilter\";\nimport EditFilter from \"./EditFilter\";\nimport { Switch, Route, Link } from \"react-router-dom\";\nimport { useQuery } from \"react-query\";\n\nconst Filters = () => {\n  const { isLoading, error, data } = useQuery([`filters`], () => {\n    return fetch(\n      (window as any).vimeographyApiSettings.root + `vimeography/v1/filters`\n    ).then((res) => {\n      return res.json();\n    });\n  });\n\n  if (isLoading) return <div>Loading filters…</div>;\n\n  return (\n    <div>\n      <Switch>\n        <Route path=\"/filters\" exact>\n          <div className=\"vm-flex vm-items-center vm-mb-4\">\n            <div className=\"vm-flex-1\">\n              <h3 className=\"vm-text-xl vm-text-gray-700\">Gallery Filters</h3>\n              <p className=\"vm-text-base vm-text-gray-600\">\n                Help your viewers find the exact videos they're looking for.\n              </p>\n            </div>\n\n            <Link to=\"/filters/new\" className=\"vm-text-blue-500\">\n              Add new filter\n            </Link>\n          </div>\n          {data.length === 0 ? (\n            <div>No filters.</div>\n          ) : (\n            <ListFilters data={data} />\n          )}\n        </Route>\n\n        <Route path=\"/filters/new\">\n          <NewFilter />\n        </Route>\n\n        <Route path=\"/filters/:filterId\">\n          <EditFilter />\n        </Route>\n      </Switch>\n    </div>\n  );\n};\n\nexport default Filters;\n"],"sourceRoot":""}