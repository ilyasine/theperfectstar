(self.webpackChunkvimeography_pro_admin=self.webpackChunkvimeography_pro_admin||[]).push([[86],{9182:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>O});var n=l(7271),a=l(334);const r=function(e){return n.createElement("div",{className:"vm-border vm-rounded"},e.data.map((function(e){return n.createElement("div",{key:e.id,className:"vm-p-4 vm-border-b"},n.createElement("span",{className:"vm-font-semibold"},e.title," "),n.createElement(a.Link,{to:"/filters/"+e.id,className:"vm-text-blue-500"},"Edit"))})))};var i=l(7975);const c=function(){var e=n.useState(""),t=e[0],l=e[1],r=(0,i.useQueryClient)(),c=(0,a.useHistory)(),o=(0,i.useMutation)((function(e){return fetch(window.vimeographyApiSettings.root+"vimeography/v1/filters",{method:"POST",mode:"same-origin",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json","X-WP-Nonce":window.wpApiSettings?window.wpApiSettings.nonce:window.vimeographyApiSettings.nonce},body:JSON.stringify({title:e})})}),{onSuccess:function(){r.invalidateQueries("filters")}});return n.createElement(n.Fragment,null,n.createElement("div",{className:"vm-flex vm-mb-4"},n.createElement("h2",{className:"vm-text-xl vm-flex-1"},"Create a new filter"),n.createElement(a.Link,{to:"/filters"},"Back to all filters")),n.createElement("div",null,n.createElement("label",{className:"vm-font-semibold vm-block vm-text-base vm-mb-1 vm-text-gray-600"},"Filter name"),n.createElement("input",{type:"text",value:t,onChange:function(e){return l(e.target.value)},className:"vm-mb-4 vm-w-72 vm-block"}),n.createElement("button",{onClick:function(){return e=void 0,l=void 0,a=function(){var e;return function(e,t){var l,n,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(l)throw new TypeError("Generator is already executing.");for(;i;)try{if(l=1,n&&(a=2&r[0]?n.return:r[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,r[1])).done)return a;switch(n=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,n=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==r[0]&&2!==r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(e){r=[6,e],n=0}finally{l=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}}(this,(function(l){switch(l.label){case 0:if(""===t)return[2];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,o.mutate(t)];case 2:return l.sent(),c.push("/filters"),[3,4];case 3:return e=l.sent(),console.log(e),[3,4];case 4:return[2]}}))},new((n=void 0)||(n=Promise))((function(t,r){function i(e){try{o(a.next(e))}catch(e){r(e)}}function c(e){try{o(a.throw(e))}catch(e){r(e)}}function o(e){var l;e.done?t(e.value):(l=e.value,l instanceof n?l:new n((function(e){e(l)}))).then(i,c)}o((a=a.apply(e,l||[])).next())}));var e,l,n,a},className:"vm-rounded vm-bg-blue-500 vm-text-white vm-px-3 vm-py-2"},"Create filter")),n.createElement("div",{className:"vm-my-4"},n.createElement("ul",null,n.createElement("li",null,"For ",n.createElement("strong",null,"training videos,")," you might create a"," ",n.createElement("strong",null,"Teacher")," filter with"," ",n.createElement("strong",null,"Joe, Sue, and Bill")," as choices."),n.createElement("li",null,"For ",n.createElement("strong",null,"car videos,")," you might create a"," ",n.createElement("strong",null,"Make")," filter with"," ",n.createElement("strong",null,"Subaru, Honda, and Tesla")," as choices."),n.createElement("li",null,"For ",n.createElement("strong",null,"sports videos,")," you might create a"," ",n.createElement("strong",null,"Sport")," filter with"," ",n.createElement("strong",null,"Baseball, Football, and Soccer")," as choices."),n.createElement("li",null,"For ",n.createElement("strong",null,"videos about books,")," you might create an"," ",n.createElement("strong",null,"Author")," filter with"," ",n.createElement("strong",null,"Malcolm Gladwell, Tim Ferriss, and Derek Sivers")," as choices."))))};var o=l(5587),s=l(4285);const m=n.createContext({isLoading:!0,error:null,data:null,state:null,dispatch:function(){}});var u=function(){return(u=Object.assign||function(e){for(var t,l=1,n=arguments.length;l<n;l++)for(var a in t=arguments[l])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};const v=function(e){var t=(0,o.nB)({id:e.id}),l=t.attributes,a=t.listeners,r=t.setNodeRef,i=t.transform,c=t.transition,v=t.isDragging,f={transform:s.ux.Transform.toString(i),transition:c},d=n.useContext(m);return n.createElement("div",u({className:"vm-border-b vm-text-xl vm-p-4 vm-bg-white "+(v?"vm-shadow-xl vm-z-10":""),ref:r,style:f},l,a),n.createElement("div",{className:"vm-flex vm-items-center"},n.createElement("svg",{className:"vm-w-5 vm-h-5 vm-mr-2 vm-text-gray-400 vm-cursor-move",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})),n.createElement("span",{className:"vm-flex-1"},e.option.title),n.createElement("span",{className:"vm-font-mono vm-text-sm"},d.data.title,":",e.option.slug)))},f=function(){var e=n.useContext(m),t=n.useState(""),l=t[0],a=t[1];return n.createElement(n.Fragment,null,n.createElement("input",{type:"text",className:"vm-block vm-mb-2 vm-w-full vm-max-w-md",value:l,onChange:function(e){return a(e.target.value)},placeholder:"New "+e.state.title+"…",onKeyDown:function(t){"Enter"===t.key&&(e.dispatch({type:"ADD_OPTION",payload:{title:l}}),a(""))}}),n.createElement("button",{className:"vm-bg-blue-500 vm-text-white vm-rounded vm-px-3 vm-py-2",onClick:function(){e.dispatch({type:"ADD_OPTION",payload:{title:l}}),a("")}},"Add ",e.state.title))};var d=l(9752);const h=function(){var e=(0,d.Dy)((0,d.VT)(d.we),(0,d.VT)(d.Lg,{coordinateGetter:o.is})),t=n.useContext(m);return n.createElement(n.Fragment,null,n.createElement("h2",{className:"vm-text-gray-600 vm-text-base vm-mb-2 vm-block vm-text-right"},t.state.options.length," ",t.state.title,t.state.options.length>1?"s":""),n.createElement("div",{className:"vm-mb-4 vm-border vm-rounded"},n.createElement(d.LB,{sensors:e,collisionDetection:d.pE,onDragEnd:function(e){return t.dispatch({type:"SORT_OPTIONS",payload:e})}},n.createElement(o.Fo,{items:t.state.options.map((function(e){return e.id})),strategy:o.qw},t.state.options.map((function(e){return n.createElement(v,{key:e.id,id:e.id,option:e})}))))),n.createElement(f,null))};var p=l(8172),E=function(){return(E=Object.assign||function(e){for(var t,l=1,n=arguments.length;l<n;l++)for(var a in t=arguments[l])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},g={id:"",slug:"",title:"",options:[]},y=function(e){e=(e=e.replace(/^\s+|\s+$/g,"")).toLowerCase();for(var t="àáäâèéëêìíïîòóöôùúüûñçěščřžýúůďťň·/_,:;",l=0,n=t.length;l<n;l++)e=e.replace(new RegExp(t.charAt(l),"g"),"aaaaeeeeiiiioooouuuuncescrzyuudtn------".charAt(l));return e.replace(".","-").replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/\//g,"")},b=function(e,t){switch(t.type){case"HYDRATE":return(0,p.ZP)(e,(function(e){e.id=t.payload.id,e.title=t.payload.title,e.slug=t.payload.slug,e.options=t.payload.options||[]}));case"EDIT_TITLE":return(0,p.ZP)(e,(function(e){e.title=t.payload}));case"ADD_OPTION":return""===t.payload.title?e:(0,p.ZP)(e,(function(e){e.options.push({id:t.payload.title,title:t.payload.title,slug:y(t.payload.title)})}));case"SORT_OPTIONS":var l=t.payload,n=l.active,a=l.over;if(n.id!==a.id){var r=e.options.findIndex((function(e){return e.id===n.id})),i=e.options.findIndex((function(e){return e.id===a.id})),c=(0,o.Rp)(e.options,r,i);return E(E({},e),{options:c})}return e;default:return e}};const x=function(e){var t=n.useReducer(b,g),l=t[0],a=t[1],r=function(e){return function(t){switch(t.type){case"ADD_OPTION":default:return e(t)}}}(a),c=(0,i.useQuery)(["filters",e.id],(function(){return fetch(window.vimeographyApiSettings.root+"vimeography/v1/filters/"+e.id).then((function(e){return e.json()}))}),{staleTime:1/0}),o=c.isLoading,s=c.error,u=c.data;return n.useEffect((function(){u&&a({payload:u,type:"HYDRATE"})}),[u]),n.useEffect((function(){console.log("save options"),console.log(l)}),[l.options]),n.createElement(m.Provider,{value:{isLoading:o,error:s,data:u,state:l,dispatch:r}},e.children)};var w=function(){return(w=Object.assign||function(e){for(var t,l=1,n=arguments.length;l<n;l++)for(var a in t=arguments[l])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};const z=function(e){return n.createElement("svg",w({"data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",width:997.861,height:450.808,viewBox:"0 0 997.861 450.808"},e),n.createElement("path",{fill:"#f2f2f2",d:"M871.992 181.558h30.159v104.398h-30.159z"}),n.createElement("path",{fill:"#f2f2f2",d:"M922.068 266.317l-73.353-87.265-147.24 1.346-89.319 86.998 1.805 1.16h-.645v180.957h308.555V268.556l.197-2.239z"}),n.createElement("path",{fill:"#e6e6e6",d:"M848.792 179.238l-91.638 107.436v162.839h164.717V266.236l-73.079-86.998z"}),n.createElement("path",{fill:"#3f3d56",d:"M823.272 359.461h33.639v29.733h-33.639zM823.272 307.996h33.639v29.262h-33.639z"}),n.createElement("path",{fill:"#fff",d:"M823.272 359.461h33.639v29.733h-33.639zM823.272 307.996h33.639v29.262h-33.639zM673.777 351.571h33.639v29.733h-33.639zM673.777 300.106h33.639v29.262h-33.639z"}),n.createElement("path",{fill:"#f2f2f2",d:"M633.992 181.558h30.159v104.398h-30.159z"}),n.createElement("path",{fill:"#f2f2f2",d:"M684.068 266.317l-73.353-87.265-147.24 1.346-89.319 86.998 1.805 1.16h-.645v180.957h308.555V268.556l.197-2.239z"}),n.createElement("path",{fill:"#e6e6e6",d:"M610.792 179.238l-91.638 107.436v162.839h164.717V266.236l-73.079-86.998z"}),n.createElement("path",{fill:"#3f3d56",d:"M585.272 359.461h33.639v29.733h-33.639zM585.272 307.996h33.639v29.262h-33.639z"}),n.createElement("path",{fill:"#fff",d:"M585.272 359.461h33.639v29.733h-33.639zM585.272 307.996h33.639v29.262h-33.639zM435.777 351.571h33.639v29.733h-33.639zM435.777 300.106h33.639v29.262h-33.639z"}),n.createElement("path",{fill:"#f2f2f2",d:"M380.154 91.46h40.3v139.501h-40.3z"}),n.createElement("path",{fill:"#f2f2f2",d:"M447.068 204.718L349.051 88.112 152.302 89.91 32.951 206.161l2.411 1.55h-.861v241.802h412.303V207.711l.264-2.993z"}),n.createElement("path",{fill:"#e6e6e6",d:"M349.153 88.36L226.702 231.921v217.592h220.102V204.611L349.153 88.36z"}),n.createElement("path",{fill:"#3f3d56",d:"M315.053 329.181h44.95v39.731h-44.95zM315.053 260.412h44.95v39.101h-44.95z"}),n.createElement("path",{fill:"#fff",d:"M315.053 329.181h44.95v39.731h-44.95zM315.053 260.412h44.95v39.101h-44.95zM115.29 318.639h44.95v39.731h-44.95zM115.29 249.869h44.95v39.101h-44.95z"}),n.createElement("path",{fill:"#3f3d56",d:"M0 448.62h963.951v2H0z"}),n.createElement("ellipse",{cx:151.872,cy:352.472,rx:29.099,ry:59.374,fill:"#3f3d56"}),n.createElement("path",{d:"M154.56 449.658c-11.655-69.925-.118-139.598 0-140.293l2.267.384c-.117.692-11.588 69.999 0 139.532z",fill:"#4cb5c2"}),n.createElement("path",{fill:"#4cb5c2",d:"M151.178 353.78l26.313-14.075 1.085 2.028-26.313 14.074zM123.406 348.783l1.085-2.028 26.31 14.083-1.085 2.027z"}),n.createElement("ellipse",{cx:81.955,cy:260.903,rx:56.915,ry:116.129,fill:"#4cb5c2"}),n.createElement("path",{d:"M88.295 450.808c-22.765-136.585-.23-272.673 0-274.032l2.267.384c-.23 1.356-22.698 137.077 0 273.27z",fill:"#3f3d56"}),n.createElement("path",{fill:"#3f3d56",d:"M81.114 264.43l51.468-27.53 1.085 2.029-51.468 27.529zM26.797 252.72l1.086-2.029 51.46 27.544-1.085 2.028z"}),n.createElement("ellipse",{cx:216.754,cy:191.008,rx:77.883,ry:158.914,fill:"#4cb5c2"}),n.createElement("path",{d:"M225.847 450.808c-31.14-186.837-.315-372.992 0-374.85l2.267.384c-.314 1.855-31.073 187.644 0 374.089z",fill:"#3f3d56"}),n.createElement("path",{fill:"#3f3d56",d:"M215.803 196.207l70.43-37.671 1.084 2.028-70.429 37.67zM141.474 179.434l1.085-2.027 70.42 37.69-1.086 2.027z"}),n.createElement("ellipse",{cx:871.029,cy:352.472,rx:29.099,ry:59.374,fill:"#3f3d56"}),n.createElement("path",{d:"M868.342 449.658c11.655-69.925.117-139.598 0-140.293l-2.267.384c.117.692 11.588 69.999-.001 139.532z",fill:"#4cb5c2"}),n.createElement("path",{fill:"#4cb5c2",d:"M844.325 341.733l1.085-2.029 26.313 14.075-1.085 2.028zM872.1 360.838l26.31-14.083 1.085 2.028-26.31 14.082z"}),n.createElement("ellipse",{cx:940.946,cy:260.903,rx:56.915,ry:116.129,fill:"#4cb5c2"}),n.createElement("path",{d:"M934.607 450.808c22.765-136.585.23-272.673 0-274.032l-2.268.384c.23 1.356 22.699 137.077 0 273.27z",fill:"#3f3d56"}),n.createElement("path",{fill:"#3f3d56",d:"M889.234 238.928l1.085-2.028 51.468 27.53-1.085 2.028zM943.559 278.235l51.46-27.544 1.086 2.028-51.46 27.544z"}),n.createElement("ellipse",{cx:806.148,cy:191.008,rx:77.883,ry:158.914,fill:"#4cb5c2"}),n.createElement("path",{d:"M797.055 450.808c31.14-186.837.314-372.992 0-374.85l-2.268.384c.315 1.855 31.074 187.644 0 374.089z",fill:"#3f3d56"}),n.createElement("path",{fill:"#3f3d56",d:"M735.584 160.563l1.085-2.028 70.429 37.671-1.085 2.028zM809.923 215.097l70.42-37.69 1.084 2.028-70.419 37.69zM589.604 101.466l9.206-7.363c-7.151-.789-10.09 3.111-11.292 6.198-5.587-2.32-11.67.72-11.67.72l18.42 6.688a13.938 13.938 0 00-4.664-6.243zM364.604 36.466l9.206-7.363c-7.151-.789-10.09 3.111-11.292 6.198-5.587-2.32-11.67.72-11.67.72l18.42 6.688a13.938 13.938 0 00-4.664-6.243zM731.604 7.466L740.81.103c-7.151-.789-10.09 3.111-11.292 6.198-5.587-2.32-11.67.72-11.67.72l18.42 6.688a13.938 13.938 0 00-4.664-6.243zM750.19 437.052a13.918 13.918 0 00-6.969 1.87 14.982 14.982 0 00-25.03 11.13h45.95a13.99 13.99 0 00-13.95-13zM283.19 437.052a13.918 13.918 0 00-6.969 1.87 14.982 14.982 0 00-25.03 11.13h45.95a13.99 13.99 0 00-13.95-13zM522.19 437.052a13.918 13.918 0 00-6.969 1.87 14.982 14.982 0 00-25.03 11.13h45.95a13.99 13.99 0 00-13.95-13zM471.759 404.228H339.191v4.276h20.675v40.626h4.276v-40.626h80.527v40.626h4.277v-40.626h22.813v-4.276zM339.452 391.434H472.02v4.276H339.452zM339.452 380.743H472.02v4.276H339.452zM339.452 370.052H472.02v4.276H339.452zM678.759 404.228H546.191v4.276h20.675v40.626h4.276v-40.626h80.527v40.626h4.277v-40.626h22.813v-4.276zM546.452 391.434H679.02v4.276H546.452zM546.452 380.743H679.02v4.276H546.452zM546.452 370.052H679.02v4.276H546.452z"}))},M=function(){var e=n.useContext(m);return n.createElement("div",{className:"vm-flex vm-items-center vm-flex-col vm-justify-center"},n.createElement(z,{width:"400",height:"250"}),n.createElement("h2",{className:"vm-text-2xl vm-text-gray-700 vm-font-semibold vm-mb-1"},"Add ",e.state.title),n.createElement("p",{className:"vm-text-lg vm-text-gray-600 vm-mb-4"},"Define choices your viewers can find videos by within a filter."),n.createElement(f,null))};var N=function(){var e=n.useContext(m);return e.isLoading?n.createElement("div",null,"Loading filter..."):e.error?n.createElement("div",null,"Error!"):n.createElement(n.Fragment,null,n.createElement("div",{className:"vm-mb-4"},n.createElement("div",{className:"vm-text-xl"},"Edit Filter: ",e.state.title),n.createElement(a.Link,{to:"/filters",className:"vm-text-blue-500"},"Back to all filters")),n.createElement("div",{className:"vm-grid vm-grid-cols-2",style:{gridTemplateColumns:"320px 800px"}},n.createElement("div",null),n.createElement("div",null,n.createElement("div",null,0===e.state.options.length?n.createElement(M,null):n.createElement(h,null)))))};const k=function(){var e=(0,a.useParams)();return n.createElement(x,{id:e.filterId},n.createElement(N,null))},O=function(){var e=(0,i.useQuery)(["filters"],(function(){return fetch(window.vimeographyApiSettings.root+"vimeography/v1/filters").then((function(e){return e.json()}))})),t=e.isLoading,l=(e.error,e.data);return t?n.createElement("div",null,"Loading filters…"):n.createElement("div",null,n.createElement(a.Switch,null,n.createElement(a.Route,{path:"/filters",exact:!0},n.createElement("div",{className:"vm-flex vm-items-center vm-mb-4"},n.createElement("div",{className:"vm-flex-1"},n.createElement("h3",{className:"vm-text-xl vm-text-gray-700"},"Gallery Filters"),n.createElement("p",{className:"vm-text-base vm-text-gray-600"},"Help your viewers find the exact videos they're looking for.")),n.createElement(a.Link,{to:"/filters/new",className:"vm-text-blue-500"},"Add new filter")),0===l.length?n.createElement("div",null,"No filters."):n.createElement(r,{data:l})),n.createElement(a.Route,{path:"/filters/new"},n.createElement(c,null)),n.createElement(a.Route,{path:"/filters/:filterId"},n.createElement(k,null))))}}}]);
//# sourceMappingURL=86.chunk.aacd7ae7deab3b960bd5.js.map